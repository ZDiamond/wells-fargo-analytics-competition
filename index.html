<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Wells Fargo Social Media Analytics Competition by ZDiamond</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Wells Fargo Social Media Analytics Competition</h1>
      <h2 class="project-tagline">Zach Diamond</h2>
      <a href="https://github.com/ZDiamond/wells-fargo-analytics-competition" class="btn">View on GitHub</a>
      <a href="https://github.com/ZDiamond/wells-fargo-analytics-competition/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/ZDiamond/wells-fargo-analytics-competition/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="wells-fargo-analytics-competition" class="anchor" href="#wells-fargo-analytics-competition" aria-hidden="true"><span class="octicon octicon-link"></span></a>Wells Fargo Analytics Competition</h1>

<h2>
<a id="zach-diamond" class="anchor" href="#zach-diamond" aria-hidden="true"><span class="octicon octicon-link"></span></a>Zach Diamond</h2>

<h3>
<a id="dr-andersons-data-101" class="anchor" href="#dr-andersons-data-101" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dr. Anderson's Data 101</h3>

<h2>
<a id="introduction" class="anchor" href="#introduction" aria-hidden="true"><span class="octicon octicon-link"></span></a>Introduction</h2>

<p>Wells Fargo assigned an analytics competition in which participants analyzed Twitter and Facebook data to deduce novel information on the customer service of 4 different bank branches. This competition provided me with real-world experience as to manipulate public data to create business insights. </p>

<h2>
<a id="methodology" class="anchor" href="#methodology" aria-hidden="true"><span class="octicon octicon-link"></span></a>Methodology</h2>

<p>We decided that the best way to manipulate the data from social media posts was to organize them by sentiment scores. To calculate a sentiment score, we created lists of positive and negative words, then found which posts contained which words. Posts that were given sentiments scored &gt;=2 or &lt;=2 defined as being very positive or very negative, respectively. Out of the entire dataset, we sampled a data frame of 10000 posts to determine sentiment scores for each social medium. I then used this same data frame to create sentiment scores for each bank so that customer service can be compared across individual banks. From this data frame, we created 5 word clouds, one for each bank, and one for the combination of all the banks.</p>

<p>Before cleaning, data looked at follows:</p>



<p><code>To preprocess data we used code:</code></p>

<p><code>df = read.table('dataset.txt',sep="|",header=T)</code>
<code>df$FullText = as.character(df$FullText)</code></p>

<p><code>df.texts.clean = as.data.frame(iconv(df$FullText, "latin1", "ASCII", sub=""))</code>
<code>colnames(df.texts.clean) = 'FullText'</code></p>

<p><code>df$FullText = df.texts.clean$FullText</code></p>

<p><code>idx.10000 = sample(1:nrow(df),10000)</code>
<code>df.10000 = df[idx.10000,]</code></p>

<p><code>df.entire = df</code>
<code>df = df.10000</code></p>

<p><code>library(tm)</code>
<code>docs &lt;- Corpus(DataframeSource(as.data.frame(df[,6])))</code></p>

<p><code>library(rJava)</code>
<code>docs &lt;- tm_map(docs, content_transformer(tolower)) # convert to lowercase first</code>
<code>docs &lt;- tm_map(docs, removeWords, stopwords('english'))</code>
<code>docs &lt;- tm_map(docs, removeWords, stopwords(kind = "SMART"))</code></p>

<p><code>myMeta &lt;- c("name","bank","banka","bankb","bankc", "bankd", "banke",</code>
            <code>"internet","https", "rettwit", "twithndl", "twit_hndl_banka",</code>
            <code>"twit_hndl_bankb","twit_hndl_bankc","twit_hndl_bankd", "phone",</code>
            <code>"dirmsg", "street","name_resp","bankds", "and", "for", "the", "you",</code>
            <code>"twithndlbanka","dir_msg","ret_twit","twit_hndl")</code>
<code>docs &lt;- tm_map(docs, removeWords, myMeta)</code>
<code>docs &lt;- tm_map(docs, stripWhitespace)</code>
<code>docs &lt;- tm_map(docs, removePunctuation)</code>
<code>docs &lt;- tm_map(docs, PlainTextDocument)</code></p>

<p><code>dtm &lt;- DocumentTermMatrix(bankA.docs)</code>
<code>dtm = removeSparseTerms(dtm, 0.98)</code></p>

<p><code>new.df &lt;-data.frame(text=unlist(sapply(dtm,</code>[<code>, "content")), stringsAsFactors=F)</code></p>

<p><code>For sentiment analysis we uploaded a database listing positive and negative words and then used code:</code>
<code>pos &lt;- scan('positive-words.txt',what='character',comment.char=';')</code>
<code>neg &lt;- scan('negative-words.txt',what='character',comment.char=';')</code></p>

<p><code>score.sentiment = function(sentences, pos.words, neg.words, .progress='none')</code>
<code>{</code>
  <code>require(plyr)</code>
  <code>require(stringr)</code>
  <code>scores = laply(sentences, function(sentence, pos.words, neg.words) {</code></p>

<pre><code>`sentence = gsub('[[:punct:]]', '', sentence)`
`sentence = gsub('[[:cntrl:]]', '', sentence)`
`sentence = gsub('\\d+', '', sentence)`
`sentence = tolower(sentence)`

`word.list = str_split(sentence, '\\s+')`
`words = unlist(word.list)`

`pos.matches = match(words, pos.words)`
`neg.matches = match(words, neg.words)`

`pos.matches = !is.na(pos.matches)`
`neg.matches = !is.na(neg.matches)`

`score = sum(pos.matches) - sum(neg.matches)`

`return(score)`
</code></pre>

<p><code>}, pos.words, neg.words, .progress=.progress )</code></p>

<p><code>scores.df = data.frame(score=scores, text=sentences)</code>
  <code>return(scores.df)</code>
<code>}</code>
<code>scores$very.pos = as.numeric(scores$score &gt;= 2)</code>
<code>scores$very.neg = as.numeric(scores$score &lt;= -2)</code></p>

<p><code>To create word clusters, we used code:</code>
<code>library(rJava)</code>
<code>docs &lt;- tm_map(docs, content_transformer(tolower))</code>
<code>myMeta &lt;- c("name","bank","banka","bankb","bankc", "bankd", "internet",</code>
             <code>"https", "rettwit", "twithndl", "twithndlbanka","twithndlbankb",</code>
             <code>"twithndlbankc","twithndlbankd", "phone", "dirmsg", "street",</code>
             <code>"nameresp","bankds")</code>
<code>docs &lt;- tm_map(docs, removeWords, myMeta)</code></p>

<p><code>myStopwords &lt;- c(stopwords('english'))</code>
<code>docs &lt;- tm_map(docs, removeWords, myStopwords) # then take out english stopwords</code></p>

<p><code>docs &lt;- tm_map(docs, stripWhitespace)</code>
<code>docs &lt;- tm_map(docs, removePunctuation)</code>
<code>docs &lt;- tm_map(docs, PlainTextDocument)</code></p>

<p><code>bankA.idx = which(sapply(df$FullText,function(x) grepl("BankA",x)))</code>
<code>bankB.idx = which(sapply(df$FullText,function(x) grepl("BankB",x)))</code>
<code>bankC.idx = which(sapply(df$FullText,function(x) grepl("BankC",x)))</code>
<code>bankD.idx = which(sapply(df$FullText,function(x) grepl("BankD",x)))</code></p>

<p><code>df$BankID = vector(mode="numeric",length = nrow(df))</code>
<code>df$BankID[bankA.idx] = "BankA"</code>
<code>df$BankID[bankB.idx] = "BankB"</code>
<code>df$BankID[bankC.idx] = "BankC"</code>
<code>df$BankID[bankD.idx] = "BankD"</code></p>

<p><code>bankA.docs = docs[bankA.idx]</code>
<code>bankB.docs = docs[bankB.idx]</code>
<code>bankC.docs = docs[bankC.idx]</code>
<code>bankD.docs = docs[bankD.idx]</code></p>

<p><code>dtm &lt;- DocumentTermMatrix(bankA.docs)</code>
<code>dtm = removeSparseTerms(dtm, 0.98)</code>
<code>dtm</code></p>

<p><code>findFreqTerms(dtm,2000)</code></p>

<p><code>freq &lt;- colSums(as.matrix(dtm))</code>
<code>freq</code>
<code>ord &lt;- order(freq)</code></p>

<p><code>library(wordcloud)</code>
<code>wordcloud(names(freq), freq, colors=brewer.pal(8, "Dark2"))</code></p>

<h2>
<a id="data" class="anchor" href="#data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Data</h2>

<h3>
<a id="sentiment-analysis" class="anchor" href="#sentiment-analysis" aria-hidden="true"><span class="octicon octicon-link"></span></a>Sentiment Analysis</h3>

<p>Our data shows that people are more likely to leave positive posts on Facebook rather than on Twitter. This conclusion could have further implications as to how banks market themselves on each social medium. Because Twitter is a live feed, customers may be more inclined to post a quick, negative review after a poor experience. On the other hand, Facebook acts as a static page on which reviews are not necessarily organized chronologically. After a positive experience, customers may find it more appealing to leave a positive review on a Facebook page. Another way of thinking about this is that positive reviews have no substantial, personal benefit. Bad reviews, in contrast, may function in getting a bank’s attention to inspire more help, discounts, or a change in customer service. When live Tweeting, bank may respond and help the individual having a poor experience.</p>

<p>Global sentiment scores were calculated to be:</p>

<p>All Banks (df.1000): 59
Bank A: 57
Bank B: 56
Bank C: 74
Bank D: 50</p>

<p>Using the formula (global_score = round( 100 * numpos / (numpos + numneg)). </p>

<p>Average sentiment scores were determined using:
Y axis: average of score (= sum(pos.matches) - sum(neg.matches)) of each social media post in data frame (ex. df.bankA)</p>

<h3>
<a id="word-clusters" class="anchor" href="#word-clusters" aria-hidden="true"><span class="octicon octicon-link"></span></a>Word Clusters</h3>

<p>All banks’ word cluster:</p>

<p>Bank A word cluster:</p>

<p>Banks B word cluster:</p>

<p>Bank C word cluster:</p>

<p>Bank D word cluster:</p>

<p>For a word to appear in the word cluster, it must have appeared at least 50 times in posts. Looking at these words clusters, we can deduce information about how customers feel about banks as a whole and how individual banks differ in customer service. Every bank, with the exception of Bank D, exhibited words “phone” and “call,” showing that customer service is a vital part of a bank’s overall reception. While one might assume that financial competence is the key proponent of a bank’s overall success, these word clusters stress that customer service is just as important. Providing poor service to customers or potential customers on the phone, could be extremely detrimental. While sacrificing the quality of employees who work phones may seem like a simple way to cut costs, banks should keep in mind that phone conversations are an integral part of customer service and it may be advantageous to spend more money on properly trained individuals. 
Comparing bank word clusters, Bank D stood out from the rest, exhibiting word that actually involve finance. Bank D’s data was comprised of financial terms such as “financial management”, “grants”, and “advisers.” For some reason, Bank D inspires more specific topics. Looking at verbs, Bank D exhibited active verbs such as “swing,” “apply,” and “program.” Other banks showed less informative verbs such as “like” and “can.” Evidently, Bank D prompts more meticulous posts. Perhaps they have some sort of reward system for customer reviews, or merely encourage reviews after an issue has been resolved. Another possibility is that Bank D has no customer service issues; therefore, people only Tweet about their finances. Either way, other banks should look at Bank D’s procedure if they are in need of more informative social media reviews. Interestingly, Bank D had the lowest global sentiment score. This could be because the posts were less emotional and more direct.
Combining sentiment scores with word clusters, we can look at word clusters for each bank for both positive sentiment scores and lower sentiment scores. This enables us to distinguish which words are being used after a positive experience and after a negative experience, thus being able to determine where the bank is excelling and where it needs improvement. Overall positive and negative word clusters for all the banks were as follows:
Positive:</p>

<p>Negative:</p>

<p>Asides from expletives, shared terms, and general positive words, we can distinguish what terms people use in different contexts. In positive posts, people use words “support,” “work,” and “business,” showing that completed transactions result in positive experiences. Negative posts, on the other hand, exhibit words “money,” “pay,” and “card.” People may post negatively when they are required to spend extra money or need to request/cancel cards.</p>

<h3>
<a id="word-clusters-for-bank-a" class="anchor" href="#word-clusters-for-bank-a" aria-hidden="true"><span class="octicon octicon-link"></span></a>Word clusters for Bank A:</h3>

<p>Positive:</p>

<p>Negative:</p>

<p>Evidently, Bank A has problems with customer service as its negative word cluster shows both “customer” and “service.” Showing words “scam” and “fraud,” Bank A clearly has issues gaining the trust of its customers.</p>

<h3>
<a id="word-clusters-for-bank-b" class="anchor" href="#word-clusters-for-bank-b" aria-hidden="true"><span class="octicon octicon-link"></span></a>Word clusters for Bank B:</h3>

<p>Positive:</p>

<p>Negative:</p>

<p>Similar to Bank A, Bank B also showed “support” in the positive word cloud, and “card” in the negative. However, customer service was not included in the negative. Bank B most likely has organizational issues showing “people,” and “rebank,” rather than customer service issues.</p>

<h3>
<a id="word-clusters-for-bank-c" class="anchor" href="#word-clusters-for-bank-c" aria-hidden="true"><span class="octicon octicon-link"></span></a>Word clusters for Bank C:</h3>

<p>Positive:</p>

<p>Negative:</p>

<p>Bank C has clear issues with their card services as “card” was the most common word. Additionally, Bank C has “time” in its negative word cluster. The speed of service may be an issue for this bank.</p>

<h3>
<a id="word-clusters-for-bank-d" class="anchor" href="#word-clusters-for-bank-d" aria-hidden="true"><span class="octicon octicon-link"></span></a>Word clusters for Bank D:</h3>

<p>Positive:</p>

<p>Negative:</p>

<p>Similar to Bank B, Bank D does not have customer service issues. However, showing words like “money,” “card,” and “fraud,” Bank D may have trust and organizational issues.</p>

<p>This competition gave me experience in business consulting via data analysis. By manipulating words posted on Twitter and Facebook, I could come to conclusions for how the bank operates and where it needs improvement.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/ZDiamond/wells-fargo-analytics-competition">Wells Fargo Social Media Analytics Competition</a> is maintained by <a href="https://github.com/ZDiamond">ZDiamond</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
